<!DOCTYPE html>
<html lang="en" class="h-100">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>MyTrashtable</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
  </head>
  <body class="h-100">
    <header class="container mb-4 mt-4">
      <h1 id="pageTitle">MyTrashtable</h1>
    </header>

    <main class="container">
      <section class="download-controls mb-4">
        <form id="optionsForm">
          <input type="file" id="fileUploadButton" onchange="onFileSelected(event)" hidden/>
          <label for="fileUploadButton" id="fileUploadLabel" class="mb-2">&#128193; Choose File</label><br>
          <button type="button" class="btn btn-primary mb-2" id="downloadBtn" onclick="downloadCalendar()" data-toggle="tooltip" data-placement="top" title="Tooltip on top">Download Calendar</button>
          <div class="options-container">
            <div data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Shorten event names by replacing the event type with an emoji. (E.g. Lecture - Module Name --> ðŸŽ“ Module Name)">
              <input type="checkbox" id="emojis" name="emojis" checked/>
              <label for="emojis">Enable emojis</label><br>
            </div>
            <!--<div>
              <input type="checkbox" id="alerts" name="alerts" />
              <label for="alerts">Add alerts</label>
            </div> TODO // Implement alerts-->
          </div>
        </form>
      </section>

      <section class="instructions">
        <h2 class="mb-0">Instructions</h2>
        <nav class="platform-picker mb-4">
          <div class="platform-picker-content">
            <a href="#pc" data-platform-opt="pc">Mac / PC (Recommended)</a>
            <a href="#ios" data-platform-opt="ios">iOS (Safari only)</a>
            <a href="#android" data-platform-opt="android">Android (Not Supported)</a>
          </div>
        </nav>

        <div class="instructions-content">
          <div data-instructions-platform="pc">
            <ol>
              <li>Login to <a href="https://mytimetable.durham.ac.uk/calendar" target="_blank">MyTimetable</a> and make sure you are on the <strong>monthly</strong> tab.</li>
              <li>Press Cmd+S / Ctrl+S to download the page (make sure you download the raw HTML). Save this file as anything you like.</li>
              <li>Choose your options above, and then click "Choose File" and select the HTML file you just downloaded.</li>
              <li>Click "Download Calendar" to download the .ics representation of your timetable.</li>
              <li>Import your timetable into your calendar app of choice. It is recommended to create a new calendar to add the events to, so that they can be easily removed later. (Tested on both iCalendar and Google Calendar).</li>
            </ol>
          </div>

          <div data-instructions-platform="ios">
            <ol>
              <li>Bookmark this page with the name "Download page source".</li>
              <li>Tap <a href="#ios" onclick="copyBookmarklet()">here</a> to copy some JavaScript to your clipboard.</li>
              <li>Open your bookmarks list and edit the bookmark you just created.</li>
              <li>Paste the text you copied in step 2 into the Address of the bookmark.</li>
              <li>Login to <a href="https://mytimetable.durham.ac.uk/calendar" target="_blank">MyTimetable</a> and make sure you are on the <strong>monthly</strong> tab.</li>
              <li>Open the bookmark you made and download the file.</li>
              <li>Choose your options above, and then tap "Choose File" and select the HTML file you just downloaded.</li>
              <li>Click "Download Calendar" and add the events to the calendar app. It is recommended to create a new calendar to add the events to, so that they can be easily removed later.</li>
            </ol>
          </div>

          <div data-instructions-platform="android">
            <ol>
              <li>Not officially supported.</li>
              <li>The iOS instructions will work on android in a pinch if you open the bookmark from the URL bar in chrome, however it is not recommended due to limited import support on calendar apps.</li>
            </ol>
          </div>
        </div>
      </section>
    </main>
    
    <footer class="footer fixed-bottom container mt-4 pt-2 pb-2">
      <p class="mb-0">Disclaimer: MyTrashtable is neither endorsed by nor affiliated with Durham University.</p>
      <p class="mb-0">This is an open source project. The code and contributors can be found <a href="https://github.com/orrygoob/myTimetableConverter" target="_blank">here</a>.</p>
      <p class="mb-0">For bugs or feature requests please make an issue on the github repository linked above.</p>
    </div>
    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <script src="FileSaver.js"></script>
    <script src="ics.js"></script>
    <script src="index.js"></script>
  </body>
</html>
